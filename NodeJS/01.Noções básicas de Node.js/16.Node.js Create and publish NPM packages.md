Neste artigo, aprenderemos como desenvolver e publicar seu próprio pacote npm (também chamado de módulo NPM). 
Há muitos benefícios dos pacotes NPM, alguns deles estão listados abaixo:
Código reutilizável
Gerenciando código (usando versionamento )
Compartilhando código
O ciclo de vida de um pacote npm ocorre como abaixo:
  
![ciclo de vida do módulo](https://media.geeksforgeeks.org/wp-content/uploads/20200104211127/module-lifecycle.png)


### 1. Configurar um projeto: 
é necessário configurar um projeto antes de fazer qualquer coisa.
Instalar Node.js
Crie uma conta npm.
![npm-inscrição](https://media.geeksforgeeks.org/wp-content/uploads/20200104211345/npm-signup.png)

Efetuando login na conta npm usando npm login
![npm-login](https://media.geeksforgeeks.org/wp-content/uploads/20200104211440/npm-login.png)

### 2. Inicializando um módulo: 
Para inicializar um módulo, vá para o terminal/linha de comando e digite npm init e responda aos prompts.
![npm-init](https://media.geeksforgeeks.org/wp-content/uploads/20200104212017/npm-init-1.jpg)

No prompt de versão , defina-o como 0.0.0 . Isso inicializa o módulo. Se você mantiver 1.0.0, significa que a versão atual do módulo é o primeiro grande lançamento para os possíveis baixadores. É claro que você não quer que o primeiro grande lançamento seja apenas uma tela em branco cheia de bugs.
No prompt principal, escolha o ponto de entrada do módulo. Potenciais baixadores o usarão como ponto de entrada para o módulo. Observe que o ponto de entrada é "src/index.js", o que é considerado uma prática padrão atualmente: colocar seu código em um diretório "src".
No prompt de comando de teste, basta pressionar Enter. Na imagem acima, o comando foi editado devido a um erro de digitação. Você também pode alterar o comando de teste a partir do arquivo package.json que será gerado.
No prompt do repositório git, você pode preencher a URL do repositório git onde o pacote será hospedado.
Preencha as palavras-chave, autor e licença ou pressione "Enter" para navegar. Estes campos podem ser modificados posteriormente no package.json.
Adicione "type": "module" no arquivo package.json para usar o recurso mais recente de importação/exportação do ES6.
Inclua um arquivo README.md no projeto para que potenciais usuários o vejam. Ele aparecerá na página inicial do seu módulo. Observe que o arquivo deve ser um markdown . Um README.md deve ser adicionado a um módulo npm para que usuários em potencial possam obter informações como a descrição do módulo, como usar o pacote, como contribuir para o pacote, etc.

No final das contas, é desejável que o diretório do nosso projeto seja parecido com isto:
![estrutura de diretório de projeto](https://media.geeksforgeeks.org/wp-content/uploads/20200104214537/project-directory-structure.png)

### 3. Construindo um módulo: 
Esta fase é a fase de codificação. Se você tem experiência com módulos NPM, sabe que eles expõem métodos que são então usados pelo projeto. Um fluxo de controle típico é:
![função-chamada-fluxo-de-trabalho-função-presente-no-módulo-npm](https://media.geeksforgeeks.org/wp-content/uploads/20200105005617/function-call-workflow-function-present-in-npm-module.png)

Vamos primeiro implementar uma função simples que soma dois números no módulo npm. Essa função se parece com a seguinte:
Nome do arquivo: index.js 
```node
export const gfgFns = {
  add : function addTwoNums (num1, num2 ) {
    return (num1 + num2) ;
  }
}
```
Observe a estrutura do arquivo index.js (que é o ponto de entrada do módulo npm que estamos construindo).

const gfgFns = {} O objeto que é exportado para uso de outros.
add: função addTwoNums() O nome da função (addTwoNums) é marcado por 'add'. Este nome 'add' é usado para chamar esta função para somar dois números.
module.exports = gfgFns O objeto gfgFns é então exportado com este nome. Quando esta função precisa ser usada em algum outro arquivo.

### 4. Publicação de um módulo: 
Após a conclusão do módulo de codificação, publique o pacote npm. Para publicar o pacote, lembre-se de uma coisa: se o nome do seu pacote já existir no registro npm, você não poderá publicá-lo. Para verificar se o nome do seu pacote é utilizável ou não, acesse a linha de comando e digite
```
npm search packagename
```
Se o nome do seu pacote for utilizável, ele deverá mostrar algo como a imagem abaixo.
![npm-search-gfgnpmpkgupload-cmd-1](https://media.geeksforgeeks.org/wp-content/uploads/20200105040515/npm-search-gfgnpmpkgupload-cmd-1.png)
Se o nome do seu módulo já existir, vá para o arquivo package.json do projeto do módulo npm e altere o nome do módulo para outro nome.

Agora, depois de verificar a disponibilidade do nome, vá para a linha de comando/terminal e faça o seguinte:
```
npm publish
```
![npm-publicar-cmd](https://media.geeksforgeeks.org/wp-content/uploads/20200105012015/npm-publish-cmd-1.png)

Agora, vamos tentar usar este módulo e ver se funciona.
Crie um novo diretório de projeto.
No terminal, digite npm init para inicializar o projeto Node.
Agora faça npm install gfgnpmpkgupload para baixar o módulo npm que acabamos de criar.
![appjs-npmpkgupload-diretório-add_function](https://media.geeksforgeeks.org/wp-content/uploads/20200105012454/appjs-npmpkgupload-directory-add_function.png)
Agora que tudo está definido, vamos tentar executar o arquivo node.js e ver se nosso módulo foi carregado, publicado, importado corretamente em nosso novo projeto e usado.
![node-appjs-add(4+5=9)-execução-sucesso-11](https://media.geeksforgeeks.org/wp-content/uploads/20200105012608/node-appjs-add459-run-success-11.png)

### 5. Atualização e gerenciamento de versões: 
Se um software está em desenvolvimento, é óbvio que ele possui versões. Versões são o resultado de correções de bugs, pequenas melhorias, grandes melhorias e lançamentos importantes. Para atender ao versionamento, o NPM nos fornece as seguintes funcionalidades.

Versionamento e publicação de código: O NPM nos permite versionar nosso módulo com base no versionamento semântico. Existem três tipos de atualizações de versão que podemos fazer: patch, minor e major. Por exemplo, se a versão atual do módulo for 0.4.5:

```
# observe como a atualização da versão secundária redefine a versão do patch para 0, da mesma forma, 
# a atualização da versão principal define a versão secundária e o patch # para 0. 
> npm versão patch # atualiza a versão para 0.4.6 
> npm versão secundária # atualiza a versão para 0.5.0 
> npm versão principal # atualiza a versão para 1.0.0
```

Quando executamos o comando acima, o número da versão no arquivo package.json também é atualizado automaticamente. 

Observação: se o módulo for republicado sem atualizar a versão, a linha de comando do NPM gerará um erro. Por exemplo, veja a imagem abaixo.
![Aborto de publicação do npm devido ao número de versão inalterado](https://media.geeksforgeeks.org/wp-content/uploads/20200105035749/npm-publish-problemDueToSameVersionNumberAsPublishedBefore.png)

Aqui, a linha de comando gerou um erro porque uma tentativa de "npm publish" foi feita sem aumentar a versão. 
Uma observação óbvia: você não pode diminuir a versão. Por exemplo, a versão não pode mudar de 0.1.2 para 0.1.1. 

O que acontece quando o usuário tem uma versão mais antiga do módulo? Quando um módulo npm é republicado (atualizado), os usuários precisam apenas executar (npm install `<packagename>`) novamente para obter a versão mais recente. 

Um pacote dependente de outros pacotes: No processo de desenvolvimento de pacotes, é comum pesquisar, usar e visualizar dependências. Isso ocorre da seguinte forma:

No projeto do módulo npm, instale as dependências necessárias para o seu módulo npm.
Instale essas dependências em seu projeto usando
```
npm install packagename1[ packagename2]
```

Verifique se essas dependências agora estão mencionadas na chave "dependencies" do arquivo package.json. Observe que as dependências e suas versões mencionadas aqui serão transferidas para o pacote npm.
Depois de garantir que todas as etapas acima foram executadas corretamente, basta publicar o módulo usando
```
npm version minor
npm publish
```

O procedimento acima deve ser executado com sucesso, e o resultado deve estar disponível para visualização no site do registro npm, como abaixo:
![três-dependências-prompt-jest-mathsjs](https://media.geeksforgeeks.org/wp-content/uploads/20200105044338/three-dependencies-prompt-jest-mathsjs.png)

Construindo um módulo mais complexo: Vamos tentar construir um módulo que leia um arquivo txt, extraia números do arquivo, some todos eles e exiba o resultado em um console. Para isso, nosso módulo npm deve ser este . 
Agora que definimos nosso módulo, vamos importá-lo para o nosso novo projeto usando
```
npm install gfgnpmpkgupload
```

Antes de executar o comando acima, execute
```
npm init -y
```
para configurar o projeto. 
Crie a estrutura do arquivo do seu projeto como abaixo:
![Estrutura do projeto npmpkguploadtest](https://media.geeksforgeeks.org/wp-content/uploads/20200105051848/npmpkguploadtest-project-structure.png)

Os arquivos de dados devem conter um numFile.txt que contém os números que devem ser adicionados e exibidos no console.
```
// numFile.txt - sum = 55
1 2 3 4 5 6 7 8 9 10
```
Para consumir este numFile.txt, teremos um gfgapp.js que fará a adição real.
![npmpkguploadtest-gfgappjs](https://media.geeksforgeeks.org/wp-content/uploads/20200105052209/npmpkguploadtest-gfgappjs.png)

Para testar isso, vá para a linha de comando e execute
```
node gfgapp.js
```

![node gfgappjs linha de comando visualizar execução bem-sucedida](https://media.geeksforgeeks.org/wp-content/uploads/20200105052329/node-gfgappjs-commandline-view-run-success.png)

Modelo de módulo NPM: Modelos de módulo NPM também estão disponíveis para a estruturação de projetos no yeoman.io . Diversas combinações de tecnologias estão disponíveis e você pode usar o gerador de sua preferência. Para começar, acesse a Busca de Geradores do Yeoman e pesquise por algo como "modelo de módulo NPM". 

Despublicando um pacote NPM: Um pacote NPM deve ser removido em até 72 horas após a publicação inicial. A outra maneira é entrar em contato com o registro do NPM. Se você for despublicar em até 72 horas, use o seguinte comando:

```
npm unpublish packageName
```

A página sobre remoção de publicação de pacotes do registro do NPM é uma boa opção para saber mais sobre isso. 

Exemplo: Use o pacote publicado para somar dois números. 
Nome do arquivo: app.js 
```
import GFGFns from 'gfgnpmpkgupload';
console.log(GFGFns.add(4, 5));
```

Saída:
![node-appjs-add459-execução-sucesso-1](https://media.geeksforgeeks.org/wp-content/uploads/20200105011350/node-appjs-add459-run-success-1.png)
