Um servidor web NodeJS é um servidor construído com NodeJS para lidar com solicitações e respostas HTTP. Ao contrário de servidores web tradicionais como Apache ou Nginx, que são projetados principalmente para fornecer conteúdo estático, os servidores web NodeJS podem lidar com conteúdo estático e dinâmico, além de oferecer suporte à comunicação em tempo real. Ele usa JavaScript (a mesma linguagem usada para scripts do lado do cliente) no lado do servidor, tornando-se uma escolha popular para desenvolvedores full-stack.

### Configurando um servidor web NodeJS

Etapa 1: instalar o NodeJS
Se você não instalou o NodeJS em seu sistema, siga o artigo - Como instalar o NodeJS
Para verificar a instalação, abra seu terminal ou prompt de comando e digite:
```
node -v
```
Isso exibirá a versão instalada do NodeJS.

Etapa 2: Crie seu diretório de projeto
Crie um novo diretório para seu projeto e navegue até ele:
```
mkdir node-server
cd node-server
```

Etapa 3: Inicializar o Projeto
Crie um arquivo package.json, que contém metadados sobre seu projeto:
```
npm init -y
```

Etapa 4: Criar um servidor básico
Crie um arquivo chamado server.js
Abra server.js no seu editor de código e adicione o seguinte código para criar um servidor HTTP simples :
```node
const http = require('http');

const server = http.createServer((req, res) => {
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end('Hello, World!');
});

const port = 3000;
const host = 'localhost';

server.listen(port, host, () => {
    console.log(`Server running at http://${host}:${port}/`);
});
```

Saída
Execute o servidor usando o comando abaixo
```
node server.js
```

![Screenshot-2025-03-05-151651](https://media.geeksforgeeks.org/wp-content/uploads/20250306115333229212/Screenshot-2025-03-05-151651.png)

Neste exemplo
http.createServer(): Cria um servidor HTTP que escuta solicitações.
res.writeHead(): Envia um cabeçalho de resposta com o código de status 200 (OK).
res.end(): Encerra a resposta e envia a mensagem "Olá, Mundo!" ao cliente.
server.listen(): Inicia o servidor no host (localhost) e porta (3000) especificados.

### Por que usar NodeJS para servidores web?

1. High Performance
O NodeJS foi projetado para velocidade. Seu modelo de E/S não bloqueante e o mecanismo V8 permitem a execução rápida de código JavaScript , tornando-o ideal para lidar com cenários de alta simultaneidade, como APIs ou aplicativos em tempo real.

 2. Single Language Stack
O NodeJS permite que desenvolvedores utilizem JavaScript tanto no lado do cliente quanto no lado do servidor. Isso elimina a necessidade de alternar entre diferentes linguagens de programação e permite uma melhor integração entre o front-end e o back-end.

3. Scalability
O NodeJS é escalável por natureza devido à sua arquitetura orientada a eventos. Ele pode lidar facilmente com mais solicitações com sobrecarga mínima, adicionando mais processos ou utilizando um balanceador de carga.

4. Real-Time Data
O NodeJS é especialmente adequado para aplicações que exigem dados em tempo real, como aplicativos de bate-papo, notificações ao vivo e plataformas colaborativas. Seu suporte a WebSocket permite comunicação full-duplex entre o cliente e o servidor.

5. Large Ecosystem
O NodeJS possui um ecossistema abrangente com mais de um milhão de bibliotecas de código aberto disponíveis via npm. Essas bibliotecas facilitam a adição de funcionalidades como autenticação, roteamento, tratamento de dados e muito mais.

### Como funciona um servidor web NodeJS?
Loop de Eventos: O servidor escuta as solicitações recebidas e as processa de forma não bloqueante. Quando uma solicitação chega, ela é passada para o loop de eventos , que decide como lidar com ela.
E/S não bloqueantes: enquanto o servidor processa uma solicitação (como consultar um banco de dados ou ler um arquivo), ele não bloqueia outras solicitações recebidas. Isso é tratado de forma assíncrona por meio de retornos de chamada, promessas ou sintaxe async/await.
Solicitação e Resposta: Assim que o loop de eventos processa a solicitação, o servidor envia uma resposta ao cliente (navegador, consumidor da API, etc.). A resposta pode estar em HTML , JSON ou outro formato de dados.
Servidores Web : O NodeJS pode servir arquivos estáticos (como imagens ou folhas de estilo) e conteúdo dinâmico (como respostas de API) usando módulos integrados como http, fs e path.

### Roteamento no servidor web NodeJS
Em aplicações reais, seu servidor precisa lidar com diferentes rotas (URLs) e responder de forma diferente com base na solicitação. Vamos entender com a ajuda do exemplo:
```node
// server.js

const http = require('http');

const hostname = '127.0.0.1';
const port = 3000;

const server = http.createServer((req, res) => {
    if (req.url === '/') {
        res.statusCode = 200;
        res.setHeader('Content-Type', 'text/plain');
        res.end('Welcome to the Homepage!');
    } else if (req.url === '/about') {
        res.statusCode = 200;
        res.setHeader('Content-Type', 'text/plain');
        res.end('This is the About Page');
    } else if (req.url === '/contact') {
        res.statusCode = 200;
        res.setHeader('Content-Type', 'text/plain');
        res.end('This is the Contact Us Page');
    }
    else {
        res.statusCode = 404;
        res.setHeader('Content-Type', 'text/plain');
        res.end('Page Not Found');
    }
});

server.listen(port, hostname, () => {
    console.log(`Server running at http://${hostname}:${port}/`);
});
```

Saída
https://media.geeksforgeeks.org/wp-content/uploads/20250306120745907293/Output.mp4
  
Neste exemplo
O método http.createServer() inicializa o servidor.
res.writeHead() envia um cabeçalho de resposta com o código de status (por exemplo, 200 OK) e quaisquer outros cabeçalhos.
res.statusCode define o código de status HTTP para a resposta. Neste caso, 200 significa que a solicitação foi bem-sucedida.
res.setHeader() define o tipo de conteúdo da resposta. Neste caso, text/plain significa que o servidor está enviando texto simples de volta ao cliente.
server.listen() vincula o servidor à porta e ao nome do host especificados (neste caso, localhost:3000).
Quando o servidor inicia com sucesso, a função de retorno de chamada é executada, registrando uma mensagem (Servidor em execução em http://127.0.0.1:3000/) no console.

### Principais benefícios de usar um servidor web NodeJS
Recursos em tempo real: o NodeJS pode ser usado em aplicativos em tempo real, como aplicativos de bate-papo ou transmissão de dados ao vivo, devido à sua arquitetura não bloqueante e modelo orientado a eventos.
Alto desempenho: o mecanismo V8 fornece execução rápida de JavaScript, tornando o NodeJS uma ótima escolha para aplicativos que exigem alto desempenho e baixa latência.
Escalabilidade: O NodeJS é altamente escalável, graças ao seu loop de eventos e E/S não bloqueantes. Ele pode lidar com um grande número de requisições simultâneas com eficiência.
Leve e eficiente: com sua natureza de thread única e não bloqueadora, o NodeJS reduz a sobrecarga de servidores multithread tradicionais, tornando-o leve e ideal para lidar com solicitações simultâneas.

